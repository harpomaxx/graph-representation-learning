schema: '2.0'
stages:
  convert:
    cmd: Rscript code/R/convert_net2graph.R --input rawdata/ctu-13/capture20110810.binetflow.labels.gz
      --output data/pajek/capture20110810.binetflow.pajek
    deps:
    - path: code/R/convert_net2graph.R
      md5: ded29e3c95babf5e0e67b263f92ab8c1
      size: 1877
    - path: rawdata/ctu-13/capture20110810.binetflow.labels.gz
      md5: 2596558e22ac484fc0f92b489cf4c434
      size: 66410453
    outs:
    - path: data/pajek
      md5: 0ade4408d6be8908d1331bea09bbce8a.dir
      size: 10284700
      nfiles: 1
  generate_ncol:
    cmd: bash code/bash/convert_net2ncol_all.sh  -o data/ncol/ -i rawdata/ctu-13-2format/
    deps:
    - path: code/R/functions/convert_net2ncol.R
      md5: 0d4a658fec549de77c2f96790ad7cbe9
      size: 2881
    - path: code/R/scripts/convert_net2ncol_cmd.R
      md5: a7f769a5c2488a7ab3a4e004e46772b7
      size: 2284
    - path: code/bash/convert_net2ncol_all.sh
      md5: 1c8da8c1fab49560392b5a9ab28a15b6
      size: 1044
    - path: rawdata/ctu-13-2format/
      md5: 9a4f53b78f2028cde6970bfd92984c11.dir
      size: 967484936
      nfiles: 27
    outs:
    - path: data/ncol/
      md5: 3f89066fbcf448b23b36e5fa1f8ffa9b.dir
      size: 429022688
      nfiles: 26
    - path: metrics/capture20110810_ncol.yaml
      md5: 79d13f257a4f0af19fd92c72f348a7e4
      size: 122
    - path: metrics/capture20110811_ncol.yaml
      md5: 90999bc7d36d7af9722690ecf5fd84a2
      size: 121
    - path: metrics/capture20110812_ncol.yaml
      md5: eb2da1537a3e93737159b7cf509ef157
      size: 121
    - path: metrics/capture20110815-2_ncol.yaml
      md5: fa050c16dfa424342173ee1906dda88b
      size: 117
    - path: metrics/capture20110815-3_ncol.yaml
      md5: 1b8193eaf502603d1a4a3f53afffa5e6
      size: 120
    - path: metrics/capture20110815_ncol.yaml
      md5: ce074f342e9fd9441f7f61a803786f8d
      size: 120
    - path: metrics/capture20110816-2_ncol.yaml
      md5: 9586f591d380961fc2dadd2da07bde4a
      size: 117
    - path: metrics/capture20110816-3_ncol.yaml
      md5: 1d10b24cfd2c5cec7fe61b568d3a274e
      size: 123
    - path: metrics/capture20110816_ncol.yaml
      md5: e3a9365c72d360f7a060bc9f3a4ec8e4
      size: 121
    - path: metrics/capture20110817_ncol.yaml
      md5: 75dca60beca9c270c080400839881f61
      size: 123
    - path: metrics/capture20110818-2_ncol.yaml
      md5: 46639e3f756903f7937bec7b7dd4d270
      size: 117
    - path: metrics/capture20110818_ncol.yaml
      md5: 9cc9f812afbb6d211e48d8ccd1378683
      size: 120
    - path: metrics/capture20110819_ncol.yaml
      md5: 5eb4ebdb5631e04d6af972bbd17a40bf
      size: 119
  calculate_bc:
    cmd: bash code/bash/calculate_bc_all.sh -i data/ncol/ -o data/features/bc/
    deps:
    - path: code/R/functions/calculate_bc.R
      md5: 8b2d22d6ba328c27597d4dba9976a48d
      size: 895
    - path: code/R/scripts/calculate_bc_cmd.R
      md5: 4d351c4bf89c6853455c71bbe25b6546
      size: 1127
    - path: code/bash/calculate_bc_all.sh
      md5: 8467cb1c083d964ab357ff1a03f076b7
      size: 1387
    - path: data/ncol/
      md5: 3f89066fbcf448b23b36e5fa1f8ffa9b.dir
      size: 429022688
      nfiles: 26
    outs:
    - path: data/features/bc/
      md5: a161c6de9151b8c8d86aeb3d86fad58e.dir
      size: 52517356
      nfiles: 13
  calculate_features:
    cmd: bash code/bash/calculate_features_all.sh -i data/ncol/ -o data/features/all/
    deps:
    - path: code/R/functions/calculate_features.R
      md5: c6f7a686c25438bc7bee6a54b53e2ce7
      size: 2554
    - path: code/R/scripts/calculate_features_cmd.R
      md5: 2aef7d6c6c7a11dacbf908e6562044a2
      size: 1194
    - path: code/bash/calculate_features_all.sh
      md5: 4ee44c81d973fe4020d1c5e21adca2b7
      size: 1342
    - path: data/ncol/
      md5: 3f89066fbcf448b23b36e5fa1f8ffa9b.dir
      size: 429022688
      nfiles: 26
    outs:
    - path: data/features/all/
      md5: 7dfd4f10cfc7e4d9b1959d0290e68612.dir
      size: 92477814
      nfiles: 13
  merge_features:
    cmd: bash code/bash/merge_features_all.sh -f data/features/all/ -b data/features/bc/
      -o data/features/csv/
    deps:
    - path: code/R/scripts/merge_features_cmd.R
      md5: 59aea8be39fc8238944dc8e28a473a13
      size: 1467
    - path: code/bash/merge_features_all.sh
      md5: 359b450522c5f25a4d8d875f09060e7f
      size: 1834
    - path: data/features/all/
      md5: 7dfd4f10cfc7e4d9b1959d0290e68612.dir
      size: 92477814
      nfiles: 13
    - path: data/features/bc/
      md5: a161c6de9151b8c8d86aeb3d86fad58e.dir
      size: 52517356
      nfiles: 13
    outs:
    - path: data/features/csv/
      md5: e135dfc0173e3ca9ae24e0da56b1c366.dir
      size: 144496516
      nfiles: 13
  label_dataset:
    cmd: bash code/bash/label_dataset_all.sh -i data/features/csv/ -l rawdata/labels/
      -o data/labeled/
    deps:
    - path: code/R/functions/label_dataset.R
      md5: 22122250508906df1af49f847f82197c
      size: 875
    - path: code/R/scripts/label_dataset_cmd.R
      md5: 05527c9f4b7372dc479ad83f67e74c25
      size: 1471
    - path: code/bash/label_dataset_all.sh
      md5: cd5ec3f348c9e202f154e0454ac82bda
      size: 1826
    - path: data/features/csv/
      md5: e135dfc0173e3ca9ae24e0da56b1c366.dir
      size: 144496516
      nfiles: 13
    - path: rawdata/labels/
      md5: fabe1ef646b63850446448a1bd83fc92.dir
      size: 10263
      nfiles: 13
    outs:
    - path: data/labeled/
      md5: 94dc0a1c4b91ca4c641aa7aa9c486f93.dir
      size: 180136293
      nfiles: 13
  normalize_features:
    cmd: bash code/bash/normalize_features_all.sh -n data/ncol/ -f data/features/csv/
      -o data/features/norm/
    deps:
    - path: code/R/functions/normalize_feature.R
      md5: 84fdc76cf7ca7535a83c2c4bfb93a25c
      size: 2074
    - path: code/R/scripts/normalize_features_cmd.R
      md5: 006d86f4f0c921e087397c24a3e8681e
      size: 2561
    - path: code/bash/normalize_features_all.sh
      md5: 9e72aef5f378f1ea67f1d87259fd5e12
      size: 1713
    - path: data/features/csv/
      md5: e135dfc0173e3ca9ae24e0da56b1c366.dir
      size: 144496516
      nfiles: 13
    - path: data/ncol/
      md5: 3f89066fbcf448b23b36e5fa1f8ffa9b.dir
      size: 429022688
      nfiles: 26
    outs:
    - path: data/features/norm/
      md5: 48715b1a4c2c7c91b15692d4b79b9588.dir
      size: 384416017
      nfiles: 13
  label_dataset_normalized:
    cmd: bash code/bash/label_dataset_all.sh -i data/features/norm/ -l rawdata/labels/
      -o data/labelednorm/
    deps:
    - path: code/R/functions/label_dataset.R
      md5: 22122250508906df1af49f847f82197c
      size: 875
    - path: code/R/scripts/label_dataset_cmd.R
      md5: 05527c9f4b7372dc479ad83f67e74c25
      size: 1471
    - path: code/bash/label_dataset_all.sh
      md5: cd5ec3f348c9e202f154e0454ac82bda
      size: 1826
    - path: data/features/norm/
      md5: 48715b1a4c2c7c91b15692d4b79b9588.dir
      size: 384416017
      nfiles: 13
    - path: rawdata/labels/
      md5: fabe1ef646b63850446448a1bd83fc92.dir
      size: 10263
      nfiles: 13
    outs:
    - path: data/labelednorm/
      md5: 2b37a6fb8f067b54a2997714090f6092.dir
      size: 419063305
      nfiles: 13
  generate_ac:
    cmd: bash code/bash/generate_ac_all.sh  -i data/ncol/ -o data/features/ac/
    deps:
    - path: code/R/scripts/calculate_ac_cmd.R
      md5: 44ceaa3d7e021a4e0fc96084c73f04ce
      size: 3040
    - path: code/bash/generate_ac_all.sh
      md5: 54464e0fa8413f1c232c2e8ba9c285b2
      size: 1612
    - path: data/ncol/
      md5: 3f89066fbcf448b23b36e5fa1f8ffa9b.dir
      size: 429022688
      nfiles: 26
    params:
      params.yaml:
        calculate_ac.alphas:
        - -0.1
        - -0.01
        - 0.001
        - 0.01
        - 0.05
        - 0.1
        - 0.2
        - 0.4
        - 0.6
        - 0.8
    outs:
    - path: data/features/ac/asis/
      md5: 8f92ec69eadade1f13fedc1d6a914b7a.dir
      size: 1042488450
      nfiles: 130
    - path: data/features/ac/normalized/
      md5: 3ba53209b9c1b7e9a6d0b0208cfddc5b.dir
      size: 1075012144
      nfiles: 130
  tune_best_ac_for_kmeans:
    cmd: Rscript code/R/scripts/tune_best_ac_for_kmeans_cmd.R --labeldir data/labelednorm/
      --acdir data/features/ac/normalized/
    deps:
    - path: code/R/functions/calculate_clustering.R
      md5: fbc13f5e4d30d7e1df4bbf693871fa98
      size: 1569
    - path: code/R/scripts/tune_best_ac_for_kmeans_cmd.R
      md5: 94651096a82844b67f76a06e1c7ffd2b
      size: 3530
    - path: data/features/ac/
      md5: 76d03fd27c9775aeafe1da6b65742c14.dir
      size: 2117500594
      nfiles: 260
    - path: data/labelednorm/
      md5: 2b37a6fb8f067b54a2997714090f6092.dir
      size: 419063305
      nfiles: 13
    params:
      params.yaml:
        calculate_ac.alphas:
        - -0.1
        - -0.01
        - 0.001
        - 0.01
        - 0.05
        - 0.1
        - 0.2
        - 0.4
        - 0.6
        - 0.8
        tune_best_ac_for_kmeans.centroids:
        - 4
        - 9
        - 16
        - 25
        - 36
        - 49
        - 64
        - 81
        - 100
        - 121
        - 144
        - 169
        - 196
        - 225
    outs:
    - path: metrics/kmeans/normalized
      md5: 26cf3bb7f919b97caee2f6d66e16af04.dir
      size: 2924
      nfiles: 10
  tune_best_ac_for_kmeans_asis:
    cmd: Rscript code/R/scripts/tune_best_ac_for_kmeans_cmd.R --labeldir data/labeled/
      --acdir data/features/ac/asis/
    deps:
    - path: code/R/functions/calculate_clustering.R
      md5: fbc13f5e4d30d7e1df4bbf693871fa98
      size: 1569
    - path: code/R/scripts/tune_best_ac_for_kmeans_cmd.R
      md5: 94651096a82844b67f76a06e1c7ffd2b
      size: 3530
    - path: data/features/ac/
      md5: 76d03fd27c9775aeafe1da6b65742c14.dir
      size: 2117500594
      nfiles: 260
    - path: data/labeled/
      md5: 94dc0a1c4b91ca4c641aa7aa9c486f93.dir
      size: 180136293
      nfiles: 13
    params:
      params.yaml:
        calculate_ac.alphas:
        - -0.1
        - -0.01
        - 0.001
        - 0.01
        - 0.05
        - 0.1
        - 0.2
        - 0.4
        - 0.6
        - 0.8
        tune_best_ac_for_kmeans.centroids:
        - 4
        - 9
        - 16
        - 25
        - 36
        - 49
        - 64
        - 81
        - 100
        - 121
        - 144
        - 169
        - 196
        - 225
    outs:
    - path: metrics/kmeans/asis
      md5: 1951d9b6744bcf26a32637efee5c2a56.dir
      size: 2739
      nfiles: 10
